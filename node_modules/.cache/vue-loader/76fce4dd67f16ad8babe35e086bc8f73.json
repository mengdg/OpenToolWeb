{"remainingRequest":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mengdegong/Desktop/blued/new/vue-element-admin/src/views/navigation/list/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/src/views/navigation/list/index.vue","mtime":1619077143528},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IE5hdmlnYXRpb24gfSBmcm9tICdAL2FwaS9uYXZpZ2F0aW9uJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdOYXYnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYXY6IHt9LAogICAgICBuYXZzOiBbXSwKICAgICAga2luZHM6IFtdLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGVkaXROYXY6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICB1cmw6ICcnLAogICAgICAgIGltZzogJycsCiAgICAgICAgZGVzYzogJycsCiAgICAgICAga2luZF9pZDogdW5kZWZpbmVkLAogICAgICAgIHJlY29tbWVuZDogMCwKICAgICAgICBzb3J0OiAwCiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLl9yZXF1ZXN0TmF2cygpCiAgfSwKICBtZXRob2RzOiB7CiAgICBfcmVxdWVzdF9raW5kcygpIHsKICAgICAgTmF2aWdhdGlvbi5nZXRfa2luZCgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHsgZGF0YSwgY29kZSB9ID0gcmVzcG9uc2UKICAgICAgICBpZiAoY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmtpbmRzID0gZGF0YQogICAgICAgIH0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICB9KQogICAgfSwKICAgIF9yZXF1ZXN0TmF2cygpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBOYXZpZ2F0aW9uLmdldF9uYXZzKCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXNwb25zZQogICAgICAgIHRoaXMubmF2cyA9IGRhdGEKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICB9KQogICAgfSwKICAgIF9yZXF1ZXN0X3VwZGF0ZSgpIHsKICAgICAgTmF2aWdhdGlvbi51cGRhdGVfbmF2KHRoaXMuZWRpdE5hdikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc3QgeyBjb2RlIH0gPSByZXNwb25zZQogICAgICAgIGlmIChjb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgbWVzc2FnZTogJ+abtOaWsOaIkOWKnycsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuX3JlcXVlc3ROYXZzKCkKICAgICAgICAgIHRoaXMucmVzZXREaWFsb2coKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBfcmVxdWVzdF9jcmVhdGUoKSB7CiAgICAgIE5hdmlnYXRpb24uY3JlYXRlX25hdih0aGlzLmVkaXROYXYpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHsgY29kZSB9ID0gcmVzcG9uc2UKICAgICAgICBpZiAoY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliJvlu7rmiJDlip8nLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLl9yZXF1ZXN0TmF2cygpCiAgICAgICAgICB0aGlzLnJlc2V0RGlhbG9nKCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgX3JlcXVlc3RfZGVsZXRlKGRhdGEpIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgTmF2aWdhdGlvbi5kZWxldGVfbmF2KGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc3QgeyBjb2RlIH0gPSByZXNwb25zZQogICAgICAgICAgaWYgKGNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5omn6KGM5oiQ5YqfJywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5fcmVxdWVzdE5hdnMoKQogICAgICAgICAgICB0aGlzLnJlc2V0RGlhbG9nKCkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9LCA1MCkKICAgIH0sCiAgICBoYW5kbGVEb25lQnV0dG9uKCkgewogICAgICBpZiAodGhpcy5lZGl0TmF2Lm5hbWUgPT09ICcnIHx8IHRoaXMuZWRpdE5hdi5zb3J0ID09PSAnJyB8fCB0aGlzLmVkaXROYXYudXJsID09PSAnJyB8fCB0aGlzLmVkaXROYXYuaW1nID09PSAnJyB8fCB0aGlzLmVkaXROYXYua2luZF9pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHRpdGxlOiAn5aSx6LSlJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7flrozlloTkv6Hmga8nLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCiAgICAgICAgaWYgKHRoaXMuZWRpdE5hdi5oYXNPd25Qcm9wZXJ0eSgnaWQnKSkgewogICAgICAgICAgdGhpcy5fcmVxdWVzdF91cGRhdGUoKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9yZXF1ZXN0X2NyZWF0ZSgpCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ3JlYXRlQnV0dG9uKCkgewogICAgICB0aGlzLl9yZXF1ZXN0X2tpbmRzKCkKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIGhhbmRsZUVkaXRCdXR0b24oZGF0YSkgewogICAgICB0aGlzLl9yZXF1ZXN0X2tpbmRzKCkKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLmVkaXROYXYgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKQogICAgfSwKICAgIGhhbmRsZURlbGV0ZUJ1dHRvbihkYXRhKSB7CiAgICAgIHRoaXMuX3JlcXVlc3RfZGVsZXRlKGRhdGEpCiAgICAgIHRoaXMuX3JlcXVlc3ROYXZzKCkKICAgIH0sCiAgICByZXNldERpYWxvZygpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgdGhpcy5lZGl0TmF2ID0gewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHVybDogJycsCiAgICAgICAgaW1nOiAnJywKICAgICAgICBkZXNjOiAnJywKICAgICAgICBraW5kX2lkOiB1bmRlZmluZWQsCiAgICAgICAgcmVjb21tZW5kOiAwLAogICAgICAgIHNvcnQ6IDAKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/navigation/list","sourcesContent":["<template>\n  <div style=\"margin:20px\">\n    <el-form>\n      <el-form-item>\n        <el-button type=\"primary\" class=\"el-icon-plus\" @click=\"dialogVisible = true\">新增卡片</el-button>\n      </el-form-item>\n    </el-form>\n    <el-table\n      ref=\"filterTable\"\n      v-loading=\"loading\"\n      :data=\"navs\"\n      style=\"width: 100%\"\n    >\n      <el-table-column\n        prop=\"id\"\n        label=\"ID\"\n        width=\"60\"\n      />\n      <el-table-column\n        prop=\"name\"\n        label=\"Name\"\n      />\n      <el-table-column\n        prop=\"url\"\n        label=\"所属分类\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.kind.name }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"url\"\n        label=\"链接\"\n        show-overflow-tooltip\n      />\n      <el-table-column\n        prop=\"state\"\n        label=\"状态\"\n        width=\"100\"\n      >\n        <template slot-scope=\"scope\">\n          <el-tag\n            :type=\"scope.row.state === 1 ? 'success' : 'danger'\"\n            disable-transitions\n          >\n            <span v-if=\"scope.row.state === 1\">\n              使用中\n            </span>\n            <span v-else>\n              已下架\n            </span>\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"recommend\"\n        label=\"是否推荐\"\n        width=\"100\"\n      >\n        <template slot-scope=\"scope\">\n          <el-tag\n            :type=\"scope.row.recommend === 1 ? 'success' : 'info'\"\n            disable-transitions\n          >\n            <span v-if=\"scope.row.recommend === 1\">\n              推荐\n            </span>\n            <span v-else>\n              未推荐\n            </span>\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"sort\"\n        label=\"排序\"\n        width=\"100\"\n      />\n      <el-table-column\n        label=\"编辑\"\n        width=\"120\"\n      >\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            circle\n            style=\"margin-right:10px;\"\n            @click=\"handleEditButton(scope.row)\"\n          />\n          <el-popconfirm\n            v-if=\"scope.row.state === 1\"\n            title=\"确定删除吗？\"\n            @onConfirm=\"handleDeleteButton(scope.row)\"\n          >\n            <el-button\n              slot=\"reference\"\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              circle\n            />\n          </el-popconfirm>\n          <el-popconfirm\n            v-else\n            title=\"确定上架吗？\"\n            @onConfirm=\"handleDeleteButton(scope.row)\"\n          >\n            <el-button\n              slot=\"reference\"\n              type=\"success\"\n              icon=\"el-icon-check\"\n              circle\n            />\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog\n      :visible.sync=\"dialogVisible\"\n      width=\"50%\"\n      :before-close=\"resetDialog\"\n    >\n      <el-form label-position=\"right\" label-width=\"80px\" :model=\"editNav\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"editNav.name\" placeholder=\"\" />\n        </el-form-item>\n        <el-form-item label=\"卡片链接\">\n          <el-input v-model=\"editNav.url\" placeholder=\"\" />\n        </el-form-item>\n        <el-form-item label=\"图片链接\">\n          <el-input v-model=\"editNav.img\" placeholder=\"\" />\n        </el-form-item>\n        <el-form-item label=\"简介\">\n          <el-input v-model=\"editNav.desc\" type=\"textarea\" :rows=\"2\" placeholder=\"\" />\n        </el-form-item>\n        <el-form-item label=\"分类\">\n          <template slot-scope=\"slot\">\n            <el-select v-model=\"editNav.kind_id\" placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in kinds\"\n                :key=\"item.id\"\n                :label=\"item.name\"\n                :value=\"item.id\"\n              />\n            </el-select>\n          </template>\n        </el-form-item>\n        <el-form-item label=\"是否推荐\">\n          <el-radio v-model=\"editNav.recommend\" :label=\"0\">不推荐</el-radio>\n          <el-radio v-model=\"editNav.recommend\" :label=\"1\">推荐</el-radio>\n        </el-form-item>\n        <el-form-item label=\"排序\">\n          <el-input v-model=\"editNav.sort\" type=\"number\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"resetDialog\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleDoneButton\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { Navigation } from '@/api/navigation'\n\nexport default {\n  name: 'Nav',\n  data() {\n    return {\n      nav: {},\n      navs: [],\n      kinds: [],\n      dialogVisible: false,\n      loading: false,\n      editNav: {\n        name: '',\n        url: '',\n        img: '',\n        desc: '',\n        kind_id: undefined,\n        recommend: 0,\n        sort: 0\n      }\n    }\n  },\n  mounted() {\n    this._requestNavs()\n  },\n  methods: {\n    _request_kinds() {\n      Navigation.get_kind().then(response => {\n        const { data, code } = response\n        if (code === 200) {\n          this.kinds = data\n        }\n        this.loading = false\n      })\n    },\n    _requestNavs() {\n      this.loading = true\n      Navigation.get_navs().then(response => {\n        const { data } = response\n        this.navs = data\n        this.loading = false\n      })\n    },\n    _request_update() {\n      Navigation.update_nav(this.editNav).then(response => {\n        const { code } = response\n        if (code === 200) {\n          this.$notify({\n            title: '成功',\n            message: '更新成功',\n            type: 'success'\n          })\n          this._requestNavs()\n          this.resetDialog()\n        }\n      })\n    },\n    _request_create() {\n      Navigation.create_nav(this.editNav).then(response => {\n        const { code } = response\n        if (code === 200) {\n          this.$notify({\n            title: '成功',\n            message: '创建成功',\n            type: 'success'\n          })\n          this._requestNavs()\n          this.resetDialog()\n        }\n      })\n    },\n    _request_delete(data) {\n      setTimeout(() => {\n        Navigation.delete_nav(data).then(response => {\n          const { code } = response\n          if (code === 200) {\n            this.$notify({\n              title: '成功',\n              message: '执行成功',\n              type: 'success'\n            })\n            this._requestNavs()\n            this.resetDialog()\n          }\n        })\n      }, 50)\n    },\n    handleDoneButton() {\n      if (this.editNav.name === '' || this.editNav.sort === '' || this.editNav.url === '' || this.editNav.img === '' || this.editNav.kind_id === undefined) {\n        this.$notify({\n          title: '失败',\n          message: '请完善信息',\n          type: 'warning'\n        })\n      } else {\n        // eslint-disable-next-line no-prototype-builtins\n        if (this.editNav.hasOwnProperty('id')) {\n          this._request_update()\n        } else {\n          this._request_create()\n        }\n      }\n    },\n    handleCreateButton() {\n      this._request_kinds()\n      this.dialogVisible = true\n    },\n    handleEditButton(data) {\n      this._request_kinds()\n      this.dialogVisible = true\n      this.editNav = JSON.parse(JSON.stringify(data))\n    },\n    handleDeleteButton(data) {\n      this._request_delete(data)\n      this._requestNavs()\n    },\n    resetDialog() {\n      this.dialogVisible = false\n      this.editNav = {\n        name: '',\n        url: '',\n        img: '',\n        desc: '',\n        kind_id: undefined,\n        recommend: 0,\n        sort: 0\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}