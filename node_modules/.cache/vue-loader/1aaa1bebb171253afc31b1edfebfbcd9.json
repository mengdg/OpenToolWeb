{"remainingRequest":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mengdegong/Desktop/blued/new/vue-element-admin/src/views/tools/project/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/src/views/tools/project/index.vue","mtime":1617956840838},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFByb2plY3QgfSBmcm9tICdAL2FwaS9wcm9qZWN0LmpzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQcm9qZWN0JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJvamVjdDoge30sCiAgICAgIHByb2plY3RzOiBbXSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBlZGl0UHJvamVjdDogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGxhYmVsOiAnJywKICAgICAgICBzb3J0OiAwCiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLl9yZXF1ZXN0X2dldF9wcm9qZWN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIF9yZXF1ZXN0X2dldF9wcm9qZWN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIFByb2plY3QuZ2V0X3Byb2plY3QoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnN0IHsgZGF0YSwgY29kZSB9ID0gcmVzcG9uc2UKICAgICAgICAgIGlmIChjb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5wcm9qZWN0cyA9IGRhdGEKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSkKICAgICAgfSwgNTAwKQogICAgfSwKICAgIF9yZXF1ZXN0X2NyZWF0ZV9wcm9qZWN0KCkgewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBQcm9qZWN0LmNyZWF0ZV9wcm9qZWN0KHRoaXMuZWRpdFByb2plY3QpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc3QgeyBjb2RlIH0gPSByZXNwb25zZQogICAgICAgICAgaWYgKGNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yib5bu65oiQ5YqfJywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5fcmVxdWVzdF9nZXRfcHJvamVjdCgpCiAgICAgICAgICAgIHRoaXMucmVzZXREaWFsb2coKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0sIDUwKQogICAgfSwKICAgIF9yZXF1ZXN0X3VwZGF0ZV9wcm9qZWN0KCkgewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBQcm9qZWN0LnVwZGF0ZV9wcm9qZWN0KHRoaXMuZWRpdFByb2plY3QpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc3QgeyBjb2RlIH0gPSByZXNwb25zZQogICAgICAgICAgaWYgKGNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5pu05paw5oiQ5YqfJywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5fcmVxdWVzdF9nZXRfcHJvamVjdCgpCiAgICAgICAgICAgIHRoaXMucmVzZXREaWFsb2coKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0sIDUwKQogICAgfSwKICAgIF9yZXF1ZXN0X2RlbGV0ZV9wcm9qZWN0KGRhdGEpIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgUHJvamVjdC5kZWxldGVfcHJvamVjdChkYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnN0IHsgY29kZSB9ID0gcmVzcG9uc2UKICAgICAgICAgIGlmIChjb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnycsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RfZ2V0X3Byb2plY3QoKQogICAgICAgICAgICB0aGlzLnJlc2V0RGlhbG9nKCkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9LCA1MCkKICAgIH0sCiAgICBoYW5kbGVDcmVhdGVCdXR0b24oKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICBoYW5kbGVFZGl0QnV0dG9uKGRhdGEpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLmVkaXRQcm9qZWN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhKSkKICAgIH0sCiAgICBoYW5kbGVEZWxldGVCdXR0b24oZGF0YSkgewogICAgICB0aGlzLl9yZXF1ZXN0X2RlbGV0ZV9wcm9qZWN0KGRhdGEpCiAgICAgIHRoaXMuX3JlcXVlc3RfZ2V0X3Byb2plY3QoKQogICAgfSwKICAgIGhhbmRsZURvbmVCdXR0b24oKSB7CiAgICAgIGlmICh0aGlzLmVkaXRQcm9qZWN0Lm5hbWUgPT09ICcnIHx8IHRoaXMuZWRpdFByb2plY3QubGFiZWwgPT09ICcnIHx8IHRoaXMuZWRpdFByb2plY3Quc29ydCA9PT0gJycpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICflpLHotKUnLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+WujOWWhOS/oeaBrycsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICAgICAgICBpZiAodGhpcy5lZGl0UHJvamVjdC5oYXNPd25Qcm9wZXJ0eSgnaWQnKSkgewogICAgICAgICAgdGhpcy5fcmVxdWVzdF91cGRhdGVfcHJvamVjdCgpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuX3JlcXVlc3RfY3JlYXRlX3Byb2plY3QoKQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlc2V0RGlhbG9nKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICB0aGlzLmVkaXRQcm9qZWN0ID0gewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGxhYmVsOiAnJywKICAgICAgICBzb3J0OiAwCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/tools/project","sourcesContent":["<template>\n  <div style=\"margin:20px\">\n    <el-button\n      type=\"primary\"\n      @click=\"handleCreateButton\"\n    >\n      创建项目分类\n    </el-button>\n    <el-table\n      ref=\"filterTable\"\n      v-loading=\"loading\"\n      :data=\"projects\"\n      style=\"width: 100%\"\n    >\n      <el-table-column\n        prop=\"id\"\n        label=\"ID\"\n        width=\"60\"\n      />\n      <el-table-column\n        prop=\"name\"\n        label=\"Name\"\n      />\n      <el-table-column\n        prop=\"label\"\n        label=\"Label\"\n      />\n      <el-table-column\n        prop=\"state\"\n        label=\"状态\"\n      >\n        <template slot-scope=\"scope\">\n          <el-tag\n            :type=\"scope.row.state === 1 ? 'success' : 'danger'\"\n            disable-transitions\n          >\n            <span v-if=\"scope.row.state === 1\">\n              使用中\n            </span>\n            <span v-else>\n              已下架\n            </span>\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"sort\"\n        label=\"排序\"\n      />\n      <el-table-column\n        label=\"编辑\"\n        width=\"120\"\n      >\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            circle\n            style=\"margin-right:10px;\"\n            @click=\"handleEditButton(scope.row)\"\n          />\n          <el-popconfirm\n            v-if=\"scope.row.state === 1\"\n            title=\"确定删除吗？\"\n            @onConfirm=\"handleDeleteButton(scope.row)\"\n          >\n            <el-button\n              slot=\"reference\"\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              circle\n            />\n          </el-popconfirm>\n          <el-popconfirm\n            v-else\n            title=\"确定上架吗？\"\n            @onConfirm=\"handleDeleteButton(scope.row)\"\n          >\n            <el-button\n              slot=\"reference\"\n              type=\"success\"\n              icon=\"el-icon-check\"\n              circle\n            />\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog\n      :visible.sync=\"dialogVisible\"\n      width=\"40%\"\n      :before-close=\"resetDialog\"\n    >\n      <el-form label-position=\"right\" label-width=\"80px\" :model=\"editProject\">\n        <el-form-item label=\"Name\">\n          <el-input v-model=\"editProject.name\" placeholder=\"使用英文，若有多个英文使用驼峰命名\" />\n        </el-form-item>\n        <el-form-item label=\"标签名\">\n          <el-input v-model=\"editProject.label\" placeholder=\"在工具列表顶部分类展示的文案\" />\n        </el-form-item>\n        <el-form-item label=\"排序\">\n          <el-input v-model=\"editProject.sort\" type=\"number\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"resetDialog\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleDoneButton\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { Project } from '@/api/project.js'\n\nexport default {\n  name: 'Project',\n  data() {\n    return {\n      project: {},\n      projects: [],\n      dialogVisible: false,\n      loading: false,\n      editProject: {\n        name: '',\n        label: '',\n        sort: 0\n      }\n    }\n  },\n  mounted() {\n    this._request_get_project()\n  },\n  methods: {\n    _request_get_project() {\n      this.loading = true\n      setTimeout(() => {\n        Project.get_project().then(response => {\n          const { data, code } = response\n          if (code === 200) {\n            this.projects = data\n          }\n          this.loading = false\n        })\n      }, 500)\n    },\n    _request_create_project() {\n      setTimeout(() => {\n        Project.create_project(this.editProject).then(response => {\n          const { code } = response\n          if (code === 200) {\n            this.$notify({\n              title: '成功',\n              message: '创建成功',\n              type: 'success'\n            })\n            this._request_get_project()\n            this.resetDialog()\n          }\n        })\n      }, 50)\n    },\n    _request_update_project() {\n      setTimeout(() => {\n        Project.update_project(this.editProject).then(response => {\n          const { code } = response\n          if (code === 200) {\n            this.$notify({\n              title: '成功',\n              message: '更新成功',\n              type: 'success'\n            })\n            this._request_get_project()\n            this.resetDialog()\n          }\n        })\n      }, 50)\n    },\n    _request_delete_project(data) {\n      setTimeout(() => {\n        Project.delete_project(data).then(response => {\n          const { code } = response\n          if (code === 200) {\n            this.$notify({\n              title: '成功',\n              message: '删除成功',\n              type: 'success'\n            })\n            this._request_get_project()\n            this.resetDialog()\n          }\n        })\n      }, 50)\n    },\n    handleCreateButton() {\n      this.dialogVisible = true\n    },\n    handleEditButton(data) {\n      this.dialogVisible = true\n      this.editProject = JSON.parse(JSON.stringify(data))\n    },\n    handleDeleteButton(data) {\n      this._request_delete_project(data)\n      this._request_get_project()\n    },\n    handleDoneButton() {\n      if (this.editProject.name === '' || this.editProject.label === '' || this.editProject.sort === '') {\n        this.$notify({\n          title: '失败',\n          message: '请完善信息',\n          type: 'warning'\n        })\n      } else {\n        // eslint-disable-next-line no-prototype-builtins\n        if (this.editProject.hasOwnProperty('id')) {\n          this._request_update_project()\n        } else {\n          this._request_create_project()\n        }\n      }\n    },\n    resetDialog() {\n      this.dialogVisible = false\n      this.editProject = {\n        name: '',\n        label: '',\n        sort: 0\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}