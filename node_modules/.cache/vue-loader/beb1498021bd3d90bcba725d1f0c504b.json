{"remainingRequest":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mengdegong/Desktop/blued/new/vue-element-admin/src/views/navigation/kind/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/src/views/navigation/kind/index.vue","mtime":1618987169457},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IE5hdmlnYXRpb24gfSBmcm9tICdAL2FwaS9uYXZpZ2F0aW9uJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdLaW5kJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAga2luZDoge30sCiAgICAgIGtpbmRzOiBbXSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBlZGl0S2luZDogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHNvcnQ6IDAKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuX3JlcXVlc3RfZ2V0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIF9yZXF1ZXN0X2dldCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBOYXZpZ2F0aW9uLmdldF9raW5kKCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBjb25zdCB7IGRhdGEsIGNvZGUgfSA9IHJlc3BvbnNlCiAgICAgICAgICBpZiAoY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMua2luZHMgPSBkYXRhCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgIH0pCiAgICAgIH0sIDUwMCkKICAgIH0sCiAgICBfcmVxdWVzdF9jcmVhdGUoKSB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIE5hdmlnYXRpb24uY3JlYXRlX2tpbmQodGhpcy5lZGl0S2luZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBjb25zdCB7IGNvZGUgfSA9IHJlc3BvbnNlCiAgICAgICAgICBpZiAoY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliJvlu7rmiJDlip8nLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLl9yZXF1ZXN0X2dldCgpCiAgICAgICAgICAgIHRoaXMucmVzZXREaWFsb2coKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0sIDUwKQogICAgfSwKICAgIF9yZXF1ZXN0X3VwZGF0ZSgpIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgTmF2aWdhdGlvbi51cGRhdGVfa2luZCh0aGlzLmVkaXRLaW5kKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnN0IHsgY29kZSB9ID0gcmVzcG9uc2UKICAgICAgICAgIGlmIChjb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+abtOaWsOaIkOWKnycsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RfZ2V0KCkKICAgICAgICAgICAgdGhpcy5yZXNldERpYWxvZygpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSwgNTApCiAgICB9LAogICAgX3JlcXVlc3RfZGVsZXRlKGRhdGEpIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgTmF2aWdhdGlvbi5kZWxldGVfa2luZChkYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnN0IHsgY29kZSB9ID0gcmVzcG9uc2UKICAgICAgICAgIGlmIChjb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnycsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RfZ2V0KCkKICAgICAgICAgICAgdGhpcy5yZXNldERpYWxvZygpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSwgNTApCiAgICB9LAogICAgaGFuZGxlQ3JlYXRlQnV0dG9uKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgaGFuZGxlRWRpdEJ1dHRvbihkYXRhKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy5lZGl0S2luZCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSkpCiAgICB9LAogICAgaGFuZGxlRGVsZXRlQnV0dG9uKGRhdGEpIHsKICAgICAgdGhpcy5fcmVxdWVzdF9kZWxldGUoZGF0YSkKICAgICAgdGhpcy5fcmVxdWVzdF9nZXQoKQogICAgfSwKICAgIGhhbmRsZURvbmVCdXR0b24oKSB7CiAgICAgIGlmICh0aGlzLmVkaXRLaW5kLm5hbWUgPT09ICcnIHx8IHRoaXMuZWRpdEtpbmQuc29ydCA9PT0gJycpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICflpLHotKUnLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+WujOWWhOS/oeaBrycsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICAgICAgICBpZiAodGhpcy5lZGl0S2luZC5oYXNPd25Qcm9wZXJ0eSgnaWQnKSkgewogICAgICAgICAgdGhpcy5fcmVxdWVzdF91cGRhdGUoKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9yZXF1ZXN0X2NyZWF0ZSgpCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVzZXREaWFsb2coKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgIHRoaXMuZWRpdEtpbmQgPSB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgc29ydDogMAogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/navigation/kind","sourcesContent":["<template>\n  <div style=\"margin:20px\">\n    <el-button\n      type=\"primary\"\n      @click=\"handleCreateButton\"\n    >\n      创建分类\n    </el-button>\n    <el-table\n      ref=\"filterTable\"\n      v-loading=\"loading\"\n      :data=\"kinds\"\n      style=\"width: 100%\"\n    >\n      <el-table-column\n        prop=\"id\"\n        label=\"ID\"\n        width=\"60\"\n      />\n      <el-table-column\n        prop=\"name\"\n        label=\"Name\"\n      />\n      <el-table-column\n        prop=\"state\"\n        label=\"状态\"\n      >\n        <template slot-scope=\"scope\">\n          <el-tag\n            :type=\"scope.row.state === 1 ? 'success' : 'danger'\"\n            disable-transitions\n          >\n            <span v-if=\"scope.row.state === 1\">\n              使用中\n            </span>\n            <span v-else>\n              已下架\n            </span>\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"sort\"\n        label=\"排序\"\n      />\n      <el-table-column\n        label=\"编辑\"\n        width=\"120\"\n      >\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            circle\n            style=\"margin-right:10px;\"\n            @click=\"handleEditButton(scope.row)\"\n          />\n          <el-popconfirm\n            v-if=\"scope.row.state === 1\"\n            title=\"确定删除吗？\"\n            @onConfirm=\"handleDeleteButton(scope.row)\"\n          >\n            <el-button\n              slot=\"reference\"\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              circle\n            />\n          </el-popconfirm>\n          <el-popconfirm\n            v-else\n            title=\"确定上架吗？\"\n            @onConfirm=\"handleDeleteButton(scope.row)\"\n          >\n            <el-button\n              slot=\"reference\"\n              type=\"success\"\n              icon=\"el-icon-check\"\n              circle\n            />\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog\n      :visible.sync=\"dialogVisible\"\n      width=\"40%\"\n      :before-close=\"resetDialog\"\n    >\n      <el-form label-position=\"right\" label-width=\"80px\" :model=\"editKind\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"editKind.name\" placeholder=\"使用英文，若有多个英文使用驼峰命名\" />\n        </el-form-item>\n        <el-form-item label=\"排序\">\n          <el-input v-model=\"editKind.sort\" type=\"number\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"resetDialog\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleDoneButton\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { Navigation } from '@/api/navigation'\n\nexport default {\n  name: 'Kind',\n  data() {\n    return {\n      kind: {},\n      kinds: [],\n      dialogVisible: false,\n      loading: false,\n      editKind: {\n        name: '',\n        sort: 0\n      }\n    }\n  },\n  mounted() {\n    this._request_get()\n  },\n  methods: {\n    _request_get() {\n      this.loading = true\n      setTimeout(() => {\n        Navigation.get_kind().then(response => {\n          const { data, code } = response\n          if (code === 200) {\n            this.kinds = data\n          }\n          this.loading = false\n        })\n      }, 500)\n    },\n    _request_create() {\n      setTimeout(() => {\n        Navigation.create_kind(this.editKind).then(response => {\n          const { code } = response\n          if (code === 200) {\n            this.$notify({\n              title: '成功',\n              message: '创建成功',\n              type: 'success'\n            })\n            this._request_get()\n            this.resetDialog()\n          }\n        })\n      }, 50)\n    },\n    _request_update() {\n      setTimeout(() => {\n        Navigation.update_kind(this.editKind).then(response => {\n          const { code } = response\n          if (code === 200) {\n            this.$notify({\n              title: '成功',\n              message: '更新成功',\n              type: 'success'\n            })\n            this._request_get()\n            this.resetDialog()\n          }\n        })\n      }, 50)\n    },\n    _request_delete(data) {\n      setTimeout(() => {\n        Navigation.delete_kind(data).then(response => {\n          const { code } = response\n          if (code === 200) {\n            this.$notify({\n              title: '成功',\n              message: '删除成功',\n              type: 'success'\n            })\n            this._request_get()\n            this.resetDialog()\n          }\n        })\n      }, 50)\n    },\n    handleCreateButton() {\n      this.dialogVisible = true\n    },\n    handleEditButton(data) {\n      this.dialogVisible = true\n      this.editKind = JSON.parse(JSON.stringify(data))\n    },\n    handleDeleteButton(data) {\n      this._request_delete(data)\n      this._request_get()\n    },\n    handleDoneButton() {\n      if (this.editKind.name === '' || this.editKind.sort === '') {\n        this.$notify({\n          title: '失败',\n          message: '请完善信息',\n          type: 'warning'\n        })\n      } else {\n        // eslint-disable-next-line no-prototype-builtins\n        if (this.editKind.hasOwnProperty('id')) {\n          this._request_update()\n        } else {\n          this._request_create()\n        }\n      }\n    },\n    resetDialog() {\n      this.dialogVisible = false\n      this.editKind = {\n        name: '',\n        sort: 0\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}