{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-664fa80f\"],{\"183e\":function(t,e,a){\"use strict\";a(\"8fb3\")},\"229e\":function(t,e,a){t.exports=a.p+\"static/img/BLCT.2dfffeef.png\"},\"4bd9\":function(t,e,a){},\"5e5d\":function(t,e,a){\"use strict\";a(\"4bd9\")},\"7d78\":function(t,e,a){\"use strict\";a.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"div\",{staticClass:\"dashboard-container\"},[o(\"el-card\",{staticClass:\"box-card\"},[o(\"div\",{staticClass:\"clearfix\",attrs:{slot:\"header\"},slot:\"header\"},[o(\"el-page-header\",{attrs:{content:t.toolParams.name,title:\"返回\"},on:{back:t.goBack}})],1),o(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticClass:\"main\"},[o(\"v-tip\",[o(\"span\",{domProps:{innerHTML:t._s(t.toolParams.describe)}})]),o(\"el-form\",{attrs:{\"label-width\":\"auto\",\"label-position\":\"left\"},model:{value:t.toolParams.params,callback:function(e){t.$set(t.toolParams,\"params\",e)},expression:\"toolParams.params\"}},[o(\"el-row\",t._l(t.toolParams.params,(function(e,a){return o(\"span\",{key:a},[o(\"el-col\",{attrs:{span:12}},[\"string\"===e.type.value?o(\"el-form-item\",{attrs:{label:e.name}},[o(\"el-input\",{attrs:{placeholder:e.placeholder},model:{value:e.default,callback:function(a){t.$set(e,\"default\",a)},expression:\"item.default\"}})],1):t._e()],1),o(\"el-col\",{attrs:{span:24}},[\"areatext\"===e.type.value?o(\"el-form-item\",{attrs:{label:e.name}},[o(\"el-input\",{attrs:{type:\"textarea\",rows:2,placeholder:e.placeholder,width:\"100%\"},model:{value:e.default,callback:function(a){t.$set(e,\"default\",a)},expression:\"item.default\"}})],1):t._e()],1),o(\"el-col\",{attrs:{span:12}},[\"number\"===e.type.value?o(\"el-form-item\",{attrs:{label:e.name}},[o(\"el-input-number\",{attrs:{placeholder:e.placeholder},model:{value:e.default,callback:function(a){t.$set(e,\"default\",a)},expression:\"item.default\"}})],1):t._e()],1),o(\"el-col\",{attrs:{span:12}},[\"boolean\"===e.type.value?o(\"el-form-item\",{attrs:{label:e.name}},[o(\"el-switch\",{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:e.default,callback:function(a){t.$set(e,\"default\",a)},expression:\"item.default\"}})],1):t._e()],1),o(\"el-col\",{attrs:{span:12}},[\"time\"===e.type.value?o(\"el-form-item\",{attrs:{label:e.name}},[o(\"el-date-picker\",{attrs:{type:\"datetime\",\"value-format\":\"yyyy-MM-dd hh:mm:ss\",placeholder:e.placeholder},model:{value:e.default,callback:function(a){t.$set(e,\"default\",a)},expression:\"item.default\"}})],1):t._e()],1),o(\"el-col\",{attrs:{span:24}},[\"radio\"===e.type.value?o(\"el-form-item\",{attrs:{label:e.name}},t._l(e.select,(function(a,s){return o(\"span\",{key:s,staticStyle:{\"margin-right\":\"5px\"}},[o(\"el-radio\",{attrs:{label:a,border:\"\"},model:{value:e.default,callback:function(a){t.$set(e,\"default\",a)},expression:\"item.default\"}},[t._v(t._s(a))])],1)})),0):t._e()],1),o(\"el-col\",{attrs:{span:24}},[\"checkbox\"===e.type.value?o(\"el-form-item\",{attrs:{label:e.name}},[o(\"el-checkbox-group\",{model:{value:e.default,callback:function(a){t.$set(e,\"default\",a)},expression:\"item.default\"}},t._l(e.select,(function(t,e){return o(\"span\",{key:e,staticStyle:{\"margin-right\":\"5px\"}},[o(\"el-checkbox\",{attrs:{label:t,border:\"\"}})],1)})),0)],1):t._e()],1),o(\"el-col\",{attrs:{span:12}},[\"dropdown\"===e.type.value?o(\"el-form-item\",{attrs:{label:e.name}},[o(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.default,callback:function(a){t.$set(e,\"default\",a)},expression:\"item.default\"}},t._l(e.select,(function(t,e){return o(\"el-option\",{key:e,attrs:{label:t,value:t}})})),1)],1):t._e()],1)],1)})),0)],1),o(\"el-form\",{attrs:{inline:\"\"},model:{value:t.toolParams.function_meta,callback:function(e){t.$set(t.toolParams,\"function_meta\",e)},expression:\"toolParams.function_meta\"}},t._l(t.toolParams.function_meta,(function(e,a){return o(\"el-form-item\",{key:a},[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(a){return t.handleFun(e)}}},[t._v(t._s(e.name))])],1)})),1),null!==t.result?o(\"v-jsoneditor\",{attrs:{options:t.options,height:\"600px\"},model:{value:t.result,callback:function(e){t.result=e},expression:\"result\"}}):t._e()],1),o(\"div\",{staticClass:\"rf\"},[t._t(\"rf\"),o(\"router-link\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"admin\",\"editor\"],expression:\"['admin', 'editor']\"}],attrs:{to:{name:\"EditTool\",params:{id:t.toolParams.id}}}},[o(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"admin\",\"editor\"],expression:\"['admin', 'editor']\"}],staticClass:\"el-icon-edit\",staticStyle:{width:\"90%\",\"margin-bottom\":\"10px\"},attrs:{type:\"success\"}},[t._v(\" 在线编辑 \")])],1),o(\"img\",{attrs:{src:a(\"229e\")}}),o(\"div\",{staticClass:\"note\"},[o(\"div\",{staticClass:\"note-container\"},[t._v(\" \"+t._s(t.wisdom)+\" \")]),o(\"div\",{staticClass:\"note-bottom\"})]),o(\"div\",{staticClass:\"inner\"},[o(\"div\",{staticClass:\"panel\"},[o(\"div\",{staticClass:\"panel-heading\"},[t._v(\"浏览记录\")]),o(\"div\",{staticClass:\"panel-body\"},t._l(t.viewer,(function(e){return o(\"ul\",{key:e.id,staticClass:\"box-list\"},[o(\"li\",[o(\"a\",{attrs:{title:e.create_time+\"【\"+e.user.name+\"】\"}},[o(\"span\",{staticClass:\"title\"},[t._v(t._s(e.create_time)+\"【\"+t._s(e.user.name)+\"】\")])])])])})),0)])])],2)])],1)},s=[],i=(a(\"4160\"),a(\"b0c0\"),a(\"159b\"),a(\"81d6\")),l=a(\"c1ab\"),r=a(\"b775\");function n(t){return Object(r[\"a\"])({url:\"/wisdom\",method:\"post\",data:{text:t}})}function c(){return Object(r[\"a\"])({url:\"/wisdom\",method:\"get\"})}var u={create_wisdom:n,get_wisdom:c};function d(t){return Object(r[\"a\"])({url:\"/visit\",method:\"post\",data:{tool_id:t}})}function m(t){return Object(r[\"a\"])({url:\"/visit\",method:\"get\",params:{tool_id:t}})}function f(t){return Object(r[\"a\"])({url:\"/viewer\",method:\"get\",params:{tool_id:t}})}var p={create_visit:d,get_visit:m,get_viewer:f};function v(t,e,a){return Object(r[\"a\"])({url:\"/launch\",method:\"post\",data:{tool_id:t,variables:e,params:a}})}var _={run:v},h=(a(\"caad\"),a(\"45fc\"),a(\"2532\"),a(\"4360\"));function b(t,e){var a=e.value,o=h[\"a\"].getters&&h[\"a\"].getters.roles;if(!(a&&a instanceof Array))throw new Error(\"need roles! Like v-permission=\\\"['admin','editor']\\\"\");if(a.length>0){var s=a,i=o.some((function(t){return s.includes(t)}));i||t.parentNode&&t.parentNode.removeChild(t)}}var g={inserted:function(t,e){b(t,e)},update:function(t,e){b(t,e)}},w=function(t){t.directive(\"permission\",g)};window.Vue&&(window[\"permission\"]=g,Vue.use(w)),g.install=w;var x=g,k={name:\"Tool\",directives:{permission:x},components:{\"v-tip\":i[\"a\"]},data:function(){return{loading:!1,toolID:0,toolParams:{},result:null,wisdom:\"\",viewer:[],options:{mode:\"code\",indentation:4}}},mounted:function(){this.toolID=this.$route.params.id,this._request_tool(),this._request_wisdom(),this._request_get_viewer(),this._request_create_visit()},methods:{goBack:function(){this.$router.back()},handleFun:function(t){var e={},a={},o=[];this.toolParams.params.forEach((function(t){e[t.varName]=t.default})),a[t.name]=t.script,o.push(a),this._request_run(e,o)},_request_tool:function(){var t=this;this.loading=!0,l[\"a\"].get_tool(this.toolID).then((function(e){var a=e.code,o=e.extra;200===a&&(t.toolParams=o,t.loading=!1)}))},_request_wisdom:function(){var t=this;u.get_wisdom().then((function(e){var a=e.code,o=e.extra;200===a&&(t.wisdom=o.text)}))},_request_get_viewer:function(){var t=this;p.get_viewer(this.toolID).then((function(e){var a=e.code,o=e.data;200===a&&(t.viewer=o)}))},_request_create_visit:function(){p.create_visit(this.toolID)},_request_run:function(t,e){var a=this;_.run(this.toolID,t,e).then((function(t){var e=t.code,o=t.message,s=t.data;200===e&&(\"无响应信息\"===o?a.$notify({title:\"成功\",message:o,type:\"success\"}):a.result=s)}))}}},y=k,C=(a(\"9a27\"),a(\"93f2\"),a(\"5e5d\"),a(\"2877\")),P=Object(C[\"a\"])(y,o,s,!1,null,\"da0c7992\",null);e[\"default\"]=P.exports},\"81d6\":function(t,e,a){\"use strict\";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"tip\"},[a(\"p\",[t._t(\"default\")],2)])},s=[],i={name:\"Tip\"},l=i,r=(a(\"183e\"),a(\"2877\")),n=Object(r[\"a\"])(l,o,s,!1,null,\"733c2735\",null);e[\"a\"]=n.exports},\"8fb3\":function(t,e,a){},\"93f2\":function(t,e,a){\"use strict\";a(\"b70c\")},\"9a27\":function(t,e,a){\"use strict\";a(\"9f7c\")},\"9f7c\":function(t,e,a){},b70c:function(t,e,a){},c1ab:function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return c}));var o=a(\"b775\");function s(t){return Object(o[\"a\"])({url:\"/tool\",method:\"post\",data:t})}function i(t){return Object(o[\"a\"])({url:\"/tool\",method:\"put\",data:t})}function l(t){return Object(o[\"a\"])({url:\"/tool\",method:\"delete\",data:{id:t}})}function r(t){return Object(o[\"a\"])({url:\"/tool\",method:\"get\",params:{tool_id:t}})}function n(t){return Object(o[\"a\"])({url:\"/tools\",method:\"get\",params:t})}var c={create_tool:s,update_tool:i,delete_tool:l,get_tool:r,get_tools:n}}}]);","extractedComments":[]}