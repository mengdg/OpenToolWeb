{"remainingRequest":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/babel-loader/lib/index.js!/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/eslint-loader/index.js??ref--13-0!/Users/mengdegong/Desktop/blued/new/vue-element-admin/src/store/modules/user.js","dependencies":[{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/src/store/modules/user.js","mtime":1617880781997},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mengdegong/Desktop/blued/new/vue-element-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbWVuZ2RlZ29uZy9EZXNrdG9wL2JsdWVkL25ldy92dWUtZWxlbWVudC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IFVzZXIgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCByb3V0ZXIsIHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKdmFyIHN0YXRlID0gewogIHRva2VuOiBnZXRUb2tlbigpLAogIG5hbWU6ICcnLAogIGF2YXRhcjogJycsCiAgaW50cm9kdWN0aW9uOiAnJywKICByb2xlczogW10KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfSU5UUk9EVUNUSU9OOiBmdW5jdGlvbiBTRVRfSU5UUk9EVUNUSU9OKHN0YXRlLCBpbnRyb2R1Y3Rpb24pIHsKICAgIHN0YXRlLmludHJvZHVjdGlvbiA9IGludHJvZHVjdGlvbjsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgfSwKICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICB9LAogIFNFVF9ST0xFUzogZnVuY3Rpb24gU0VUX1JPTEVTKHN0YXRlLCByb2xlcykgewogICAgc3RhdGUucm9sZXMgPSByb2xlczsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIHVzZXIgbG9naW4KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgY29kZSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgVXNlci5sb2dpbihjb2RlKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNwb25zZSkgewogICAgICAgICAgdmFyIGV4dHJhLCBhY2Nlc3NSb3V0ZXM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGV4dHJhID0gcmVzcG9uc2UuZXh0cmE7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgZXh0cmEudWlkKTsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsIGV4dHJhLm5hbWUpOwogICAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBleHRyYS5hdmF0YXIpOwogICAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9ST0xFUycsIGV4dHJhLmlkZW50aXR5KTsKICAgICAgICAgICAgICAgICAgc2V0VG9rZW4oZXh0cmEudWlkKTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgncGVybWlzc2lvbi9nZW5lcmF0ZVJvdXRlcycsIGV4dHJhLmlkZW50aXR5KTsKCiAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgIGFjY2Vzc1JvdXRlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZXMoYWNjZXNzUm91dGVzKTsKICAgICAgICAgICAgICAgICAgcmVzb2x2ZShleHRyYSk7CgogICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBzdG9yZS5nZXR0ZXJzLmxhcms7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBVc2VyLnVzZXJfaW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZXh0cmEgPSByZXNwb25zZS5leHRyYTsKCiAgICAgICAgaWYgKCFleHRyYSkgewogICAgICAgICAgcmVqZWN0KCdWZXJpZmljYXRpb24gZmFpbGVkLCBwbGVhc2UgTG9naW4gYWdhaW4uJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgaWRlbnRpdHkgPSBleHRyYS5pZGVudGl0eSwKICAgICAgICAgICAgbmFtZSA9IGV4dHJhLm5hbWUsCiAgICAgICAgICAgIGF2YXRhciA9IGV4dHJhLmF2YXRhcjsgLy8gcm9sZXMgbXVzdCBiZSBhIG5vbi1lbXB0eSBhcnJheQoKICAgICAgICBpZiAoIWlkZW50aXR5IHx8IGlkZW50aXR5Lmxlbmd0aCA8PSAwKSB7CiAgICAgICAgICByZWplY3QoJ2dldEluZm86IHJvbGVzIG11c3QgYmUgYSBub24tbnVsbCBhcnJheSEnKTsKICAgICAgICB9CgogICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgaWRlbnRpdHkpOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKTsKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICAgIHJlc29sdmUoZXh0cmEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHN0b3JlLmdldHRlcnMubGFyazsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gdXNlciBsb2dvdXQKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmNCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWY0LnN0YXRlLAogICAgICAgIGRpc3BhdGNoID0gX3JlZjQuZGlzcGF0Y2g7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIHJlc2V0Um91dGVyKCk7IC8vIHJlc2V0IHZpc2l0ZWQgdmlld3MgYW5kIGNhY2hlZCB2aWV3cwogICAgICAvLyB0byBmaXhlZCBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi92dWUtZWxlbWVudC1hZG1pbi9pc3N1ZXMvMjQ4NQoKICAgICAgZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbEFsbFZpZXdzJywgbnVsbCwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0sCiAgLy8gcmVtb3ZlIHRva2VuCiAgcmVzZXRUb2tlbjogZnVuY3Rpb24gcmVzZXRUb2tlbihfcmVmNSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0sCiAgLy8gZHluYW1pY2FsbHkgbW9kaWZ5IHBlcm1pc3Npb25zCiAgY2hhbmdlUm9sZXM6IGZ1bmN0aW9uIGNoYW5nZVJvbGVzKF9yZWY2LCByb2xlKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGNvbW1pdCwgZGlzcGF0Y2gsIHRva2VuLCBfeWllbGQkZGlzcGF0Y2gsIHJvbGVzLCBhY2Nlc3NSb3V0ZXM7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY2LmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmNi5kaXNwYXRjaDsKICAgICAgICAgICAgICB0b2tlbiA9IHJvbGUgKyAnLXRva2VuJzsKICAgICAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHRva2VuKTsKICAgICAgICAgICAgICBzZXRUb2tlbih0b2tlbik7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZ2V0SW5mbycpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF95aWVsZCRkaXNwYXRjaCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIHJvbGVzID0gX3lpZWxkJGRpc3BhdGNoLnJvbGVzOwogICAgICAgICAgICAgIHJlc2V0Um91dGVyKCk7IC8vIGdlbmVyYXRlIGFjY2Vzc2libGUgcm91dGVzIG1hcCBiYXNlZCBvbiByb2xlcwoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgncGVybWlzc2lvbi9nZW5lcmF0ZVJvdXRlcycsIHJvbGVzLCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGFjY2Vzc1JvdXRlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIC8vIGR5bmFtaWNhbGx5IGFkZCBhY2Nlc3NpYmxlIHJvdXRlcwogICAgICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZXMoYWNjZXNzUm91dGVzKTsgLy8gcmVzZXQgdmlzaXRlZCB2aWV3cyBhbmQgY2FjaGVkIHZpZXdzCgogICAgICAgICAgICAgIGRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycsIG51bGwsIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Users/mengdegong/Desktop/blued/new/vue-element-admin/src/store/modules/user.js"],"names":["User","getToken","setToken","removeToken","router","resetRouter","store","state","token","name","avatar","introduction","roles","mutations","SET_TOKEN","SET_INTRODUCTION","SET_NAME","SET_AVATAR","SET_ROLES","actions","login","code","commit","Promise","resolve","reject","then","response","extra","uid","identity","dispatch","accessRoutes","addRoutes","catch","error","window","location","href","getters","lark","getInfo","user_info","length","logout","root","resetToken","changeRoles","role","namespaced"],"mappings":"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","sourcesContent":["import { User } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport router, { resetRouter } from '@/router'\nimport store from '@/store'\n\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n  introduction: '',\n  roles: []\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_INTRODUCTION: (state, introduction) => {\n    state.introduction = introduction\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  }\n}\n\nconst actions = {\n  // user login\n  login({ commit }, code) {\n    return new Promise((resolve, reject) => {\n      User.login(code).then(async(response) => {\n        const { extra } = response\n        commit('SET_TOKEN', extra.uid)\n        commit('SET_NAME', extra.name)\n        commit('SET_AVATAR', extra.avatar)\n        commit('SET_ROLES', extra.identity)\n        setToken(extra.uid)\n        const accessRoutes = await store.dispatch('permission/generateRoutes', extra.identity)\n        router.addRoutes(accessRoutes)\n        resolve(extra)\n      }).catch(error => {\n        window.location.href = store.getters.lark\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      User.user_info(state.token).then(response => {\n        const { extra } = response\n\n        if (!extra) {\n          reject('Verification failed, please Login again.')\n        }\n\n        const { identity, name, avatar } = extra\n\n        // roles must be a non-empty array\n        if (!identity || identity.length <= 0) {\n          reject('getInfo: roles must be a non-null array!')\n        }\n        commit('SET_ROLES', identity)\n        commit('SET_NAME', name)\n        commit('SET_AVATAR', avatar)\n        resolve(extra)\n      }).catch(error => {\n        window.location.href = store.getters.lark\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, state, dispatch }) {\n    return new Promise((resolve, reject) => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      removeToken()\n      resetRouter()\n\n      // reset visited views and cached views\n      // to fixed https://github.com/PanJiaChen/vue-element-admin/issues/2485\n      dispatch('tagsView/delAllViews', null, { root: true })\n\n      resolve()\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      removeToken()\n      resolve()\n    })\n  },\n\n  // dynamically modify permissions\n  async changeRoles({ commit, dispatch }, role) {\n    const token = role + '-token'\n\n    commit('SET_TOKEN', token)\n    setToken(token)\n\n    const { roles } = await dispatch('getInfo')\n\n    resetRouter()\n\n    // generate accessible routes map based on roles\n    const accessRoutes = await dispatch('permission/generateRoutes', roles, { root: true })\n    // dynamically add accessible routes\n    router.addRoutes(accessRoutes)\n\n    // reset visited views and cached views\n    dispatch('tagsView/delAllViews', null, { root: true })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}